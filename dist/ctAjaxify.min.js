/*! ctAjaxify 2013-10-04 */
!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("jquery-scrollto",this,function(){var a,b,c;return a=b=window.jQuery||require("jquery"),b.propHooks.scrollTop=b.propHooks.scrollLeft={get:function(a,b){var c=null;return("HTML"===a.tagName||"BODY"===a.tagName)&&("scrollLeft"===b?c=window.scrollX:"scrollTop"===b&&(c=window.scrollY)),null==c&&(c=a[b]),c}},b.Tween.propHooks.scrollTop=b.Tween.propHooks.scrollLeft={get:function(a){return b.propHooks.scrollTop.get(a.elem,a.prop)},set:function(a){"HTML"===a.elem.tagName||"BODY"===a.elem.tagName?(a.options.bodyScrollLeft=a.options.bodyScrollLeft||window.scrollX,a.options.bodyScrollTop=a.options.bodyScrollTop||window.scrollY,"scrollLeft"===a.prop?a.options.bodyScrollLeft=Math.round(a.now):"scrollTop"===a.prop&&(a.options.bodyScrollTop=Math.round(a.now)),window.scrollTo(a.options.bodyScrollLeft,a.options.bodyScrollTop)):a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},c={config:{duration:400,easing:"swing",callback:void 0,durationMode:"each",offsetTop:0,offsetLeft:0},configure:function(a){return b.extend(c.config,a||{}),this},scroll:function(a,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return e=a.pop(),f=e.$container,g=e.$target,j=f.prop("tagName"),h=b("<span/>").css({position:"absolute",top:"0px",left:"0px"}),i=f.css("position"),f.css({position:"relative"}),h.appendTo(f),o=h.offset().top,p=g.offset().top,q=p-o-parseInt(d.offsetTop,10),r=h.offset().left,s=g.offset().left,t=s-r-parseInt(d.offsetLeft,10),k=f.prop("scrollTop"),l=f.prop("scrollLeft"),h.remove(),f.css({position:i}),u={},v=function(){return 0===a.length?"function"==typeof d.callback&&d.callback():c.scroll(a,d),!0},d.onlyIfOutside&&(m=k+f.height(),n=l+f.width(),q>k&&m>q&&(q=k),t>l&&n>t&&(t=l)),q!==k&&(u.scrollTop=q),t!==l&&(u.scrollLeft=t),f.prop("scrollHeight")===f.width()&&delete u.scrollTop,f.prop("scrollWidth")===f.width()&&delete u.scrollLeft,null!=u.scrollTop||null!=u.scrollLeft?f.animate(u,{duration:d.duration,easing:d.easing,complete:v}):v(),!0},fn:function(a){var d,e,f,g;d=[];var h=b(this);if(0===h.length)return this;for(e=b.extend({},c.config,a),f=h.parent(),g=f.get(0);1===f.length&&g!==document.body&&g!==document;){var i,j;i="visible"!==f.css("overflow-y")&&g.scrollHeight!==g.clientHeight,j="visible"!==f.css("overflow-x")&&g.scrollWidth!==g.clientWidth,(i||j)&&(d.push({$container:f,$target:h}),h=f),f=f.parent(),g=f.get(0)}return d.push({$container:b("html"),$target:h}),"all"===e.durationMode&&(e.duration/=d.length),c.scroll(d,e),this}},b.ScrollTo=b.ScrollTo||c,b.fn.ScrollTo=b.fn.ScrollTo||c.fn,c}),window.JSON||(window.JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return str("",{"":a});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},"undefined"!=typeof c.init&&c.init()}(window),function(a){"use strict";var b=a.document,c=a.setTimeout||c,d=a.clearTimeout||d,e=a.setInterval||e,f=a.History=a.History||{};if("undefined"!=typeof f.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");f.initHtml4=function(){return"undefined"!=typeof f.initHtml4.initialized?!1:(f.initHtml4.initialized=!0,f.enabled=!0,f.savedHashes=[],f.isLastHash=function(a){var b,c=f.getHashByIndex();return b=a===c},f.saveHash=function(a){return f.isLastHash(a)?!1:(f.savedHashes.push(a),!0)},f.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?f.savedHashes[f.savedHashes.length-1]:0>a?f.savedHashes[f.savedHashes.length+a]:f.savedHashes[a]},f.discardedHashes={},f.discardedStates={},f.discardState=function(a,b,c){var d,e=f.getHashByState(a);return d={discardedState:a,backState:c,forwardState:b},f.discardedStates[e]=d,!0},f.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return f.discardedHashes[a]=d,!0},f.discardedState=function(a){var b,c=f.getHashByState(a);return b=f.discardedStates[c]||!1},f.discardedHash=function(a){var b=f.discardedHashes[a]||!1;return b},f.recycleState=function(a){var b=f.getHashByState(a);return f.discardedState(a)&&delete f.discardedStates[b],!0},f.emulated.hashChange&&(f.hashChangeInit=function(){f.checkerFunction=null;var c,d,g,h,i="";return f.isInternetExplorer()?(c="historyjs-iframe",d=b.createElement("iframe"),d.setAttribute("id",c),d.style.display="none",b.body.appendChild(d),d.contentWindow.document.open(),d.contentWindow.document.close(),g="",h=!1,f.checkerFunction=function(){if(h)return!1;h=!0;var b=f.getHash()||"",c=f.unescapeHash(d.contentWindow.document.location.hash)||"";return b!==i?(i=b,c!==b&&(g=c=b,d.contentWindow.document.open(),d.contentWindow.document.close(),d.contentWindow.document.location.hash=f.escapeHash(b)),f.Adapter.trigger(a,"hashchange")):c!==g&&(g=c,f.setHash(c,!1)),h=!1,!0}):f.checkerFunction=function(){var b=f.getHash();return b!==i&&(i=b,f.Adapter.trigger(a,"hashchange")),!0},f.intervalList.push(e(f.checkerFunction,f.options.hashChangeInterval)),!0},f.Adapter.onDomLoad(f.hashChangeInit)),f.emulated.pushState&&(f.onHashChange=function(c){var d,e=c&&c.newURL||b.location.href,g=f.getHashByUrl(e),h=null,i=null;return f.isLastHash(g)?(f.busy(!1),!1):(f.doubleCheckComplete(),f.saveHash(g),g&&f.isTraditionalAnchor(g)?(f.Adapter.trigger(a,"anchorchange"),f.busy(!1),!1):(h=f.extractState(f.getFullUrl(g||b.location.href,!1),!0),f.isLastSavedState(h)?(f.busy(!1),!1):(i=f.getHashByState(h),d=f.discardedState(h),d?(f.getHashByIndex(-2)===f.getHashByState(d.forwardState)?f.back(!1):f.forward(!1),!1):(f.pushState(h.data,h.title,h.url,!1),!0))))},f.Adapter.bind(a,"hashchange",f.onHashChange),f.pushState=function(c,d,e,g){if(f.getHashByUrl(e))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(g!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:g}),!1;f.busy(!0);var h=f.createStateObject(c,d,e),i=f.getHashByState(h),j=f.getState(!1),k=f.getHashByState(j),l=f.getHash();return f.storeState(h),f.expectedStateId=h.id,f.recycleState(h),f.setTitle(h),i===k?(f.busy(!1),!1):i!==l&&i!==f.getShortUrl(b.location.href)?(f.setHash(i,!1),!1):(f.saveState(h),f.Adapter.trigger(a,"statechange"),f.busy(!1),!0)},f.replaceState=function(a,b,c,d){if(f.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:d}),!1;f.busy(!0);var e=f.createStateObject(a,b,c),g=f.getState(!1),h=f.getStateByIndex(-2);return f.discardState(g,e,h),f.pushState(e.data,e.title,e.url,!1),!0}),f.emulated.pushState&&f.getHash()&&!f.emulated.hashChange&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(a,"hashchange")}),void 0)},"undefined"!=typeof f.init&&f.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a,b,e,f,g,h="undefined"!=typeof c&&"undefined"!=typeof c.log&&"undefined"!=typeof c.log.apply,i=d.getElementById("log");for(h?(f=Array.prototype.slice.call(arguments),a=f.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[a,f]):c.log.apply(c,[a,f])):a="\n"+arguments[0]+"\n",b=1,e=arguments.length;e>b;++b){if(g=arguments[b],"object"==typeof g&&"undefined"!=typeof k)try{g=k.stringify(g)}catch(j){}a+="\n"+g+"\n"}return i?(i.value+=a+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):h||l(a),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a,b=m.getState(!1,!1),c=(b||{}).url||d.location.href;return a=c.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b,c=m.extractId(a.url);if(!c)if(b=m.getStateString(a),"undefined"!=typeof m.stateToId[b])c=m.stateToId[b];else if("undefined"!=typeof m.store.stateToId[b])c=m.store.stateToId[b];else{for(;c=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof m.idToState[c]||"undefined"!=typeof m.store.idToState[c];);m.stateToId[b]=c,m.idToState[c]=a}return c},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c,d,e=null;return b=b||!1,c=m.extractId(a),c&&(e=m.getStateById(c)),e||(d=m.getFullUrl(a),c=m.getIdByUrl(d)||!1,c&&(e=m.getStateById(c)),!e&&b&&!m.isTraditionalAnchor(a)&&(e=m.createStateObject(null,null,d))),e},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b,c=!1;return b=m.extractState(a.url),c=b&&b.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b,c,d,e=!1;return m.savedStates.length&&(b=a.id,c=m.getLastSavedState(),d=c.id,e=b===d),e},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){for(var c,d=b;c=a.unescape(d),c!==d;)d=c;return d},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var b,c=a.title;c||(b=m.getStateByIndex(0),b&&b.url===a.url&&(c=b.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=c,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b,c=m.extractState(d.location.href);if(!m.isLastSavedState(c))return b=c,b||(b=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var e,f,g=!1,h=!1;return m.doubleCheckComplete(),e=m.getHash(),e?(f=m.extractState(e||d.location.href,!0),f?m.replaceState(f.data,f.title,f.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(g=m.Adapter.extractEventData("state",b,c)||!1,h=g?m.getStateById(g):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(d.location.href),h||(h=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(h)?(m.busy(!1),!1):(m.storeState(h),m.saveState(h),m.setTitle(h),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.init()}(window),function(a,b){function c(a,b){return a in m._events&&m._events[a]?m._events[a].apply(window.ctAjaxify,b?b:[]):void 0}function d(b){return a.trim(String(b).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script)\>/gi,"</div>"))}function e(){m.options.progressIndicator.enable&&(m.options.progressIndicator.insertStyle(),m.options.progressIndicator.insertHtml())}function f(){var f=a(window),i=a(h.body),j=g.getRootUrl(),k=a(m.options.contentSelector).filter(":first"),l=k.get(0);0===k.length&&(k=i,l=k.get(0)),a.expr[":"].internal=function(b){var c=a(b).attr("href")||"";return c.substring(0,j.length)===j||-1===c.indexOf(":")},a.fn.ajaxify=function(){var b=a(this);return b.delegate("a:internal:not(.no-ajaxify)","click",function(b){var c=a(this),d=c.attr("href"),e=c.attr("title")||null;return 2==b.which||b.metaKey?!0:(g.pushState(null,e,d),b.preventDefault(),!1)}),b},i.ajaxify(),f.on("statechange",function(){var n=g.getState(),o=n.url;o.replace(j,""),i.addClass("ajaxify-loading"),c("ajaxifyLoadingBegin"),m.options.effect&&m.options.effect.fadeOut&&(b.isFunction(m.options.fadeOut)?m.options.fadeOut(k):k.animate({opacity:0},m.options.effect.fadeOut)),a.ajax({url:o,beforeSend:function(a,b){c("ajaxifyAjaxBeforeSend",[a,b])},success:function(g){var j=a(d(g)),n=j.find(".document-body:first"),p=n.find(m.options.contentSelector).filter(":first"),q=p.find(".document-script");q.length||(q=n.find(".document-script")),q.length&&q.detach();var r=p.html();if(r||(r=n.html()),!r)return h.location.href=o,!1;c("ajaxifyBeforeUpdateContent",[r]),k.stop(!0,!0),k.html(r).ajaxify(),k.show(0),m.options.effect&&m.options.effect.fadeIn&&(b.isFunction(m.options.effect.fadeIn)?m.options.effect.fadeIn(k):k.animate({opacity:100},m.options.effect.fadeIn)),h.title=j.find(".document-title:first").text();try{h.getElementsByTagName("title")[0].innerHTML=h.title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(s){}c("ajaxifyAfterUpdateContent"),q.each(function(){var b=a(this),d=b.text(),e=h.createElement("script");b.attr("src")&&(b[0].async||(e.async=!1),e.src=b.attr("src")),e.appendChild(h.createTextNode(d)),c("ajaxifyBeforeInsertScript",[a(e),b]),l.appendChild(e)}),i.ScrollTo&&i.ScrollTo(m.options.scrollOptions),e(),c("ajaxifyLoadingEnd"),i.removeClass("ajaxify-loading"),c("ajaxifyStateChangeComplete"),f.trigger("statechangecomplete")},error:function(a,b,d){return c("ajaxifyAjaxError",[a,b,d]),h.location.href=o,!1}})}),a(window).on("beforeunload",function(){i.addClass("ajaxify-loading")}),e()}var g=window.History,h=window.document;if(!g.enabled)return console.log("Error: No history.js support!"),!1;var i=g.emulated.pushState||g.emulated.hasChange||h.getElementsByTagName("html")[0].hasAttribute("disableAjaxify");if(window.location.go=function(a,b){i?window.location.href=a:g.pushState(null,b?b:"",a)},!i){var j="ajaxify-ui-style",k="ajaxify-ui-p",l={enable:!0,insertStyle:function(){if(!h.getElementById(j)){var b=h.createElement("style");b.id=j,b.appendChild(h.createTextNode("@-webkit-keyframes ajaxify-ui-p-a {  0% { left: -100%; }  100% { left: -2%; } }  body.ajaxify-loading .ajaxify-ui-p { display: block; }  body .ajaxify-ui-p {    display: none; position: fixed; top: 0px; left: 0px;    height: 3px; width: 100%; left: -2%; z-index: 9999;    background: #5bb75b;    animation-name: ajaxify-ui-pa;    -webkit-animation-name: ajaxify-ui-p-a;    animation-duration: 1s;    -webkit-animation-duration: 1s; }")),a(h.head).append(b)}},insertHtml:function(){if(!h.getElementById(k)){var b=h.createElement("div");b.id=k,b.className="ajaxify-ui-p",a(h.body).prepend(b)}}},m=window.ctAjaxify||{options:{}};b.defaults(m.options,{contentSelector:"#content,article:first,.article:first,.post:first",scrollOptions:{duration:800,easing:"swing"},effect:{fadeOut:0,fadeIn:0},progressIndicator:l}),window.ctAjaxify=m,m._events={},m.on=function(a,b){a in m._events||(m._events[a]=void 0),m._events[a]=b},a(f)}}($,_);